# ğŸš€ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

## 1ë¶„ ì•ˆì— ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°

### Step 1: ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

```bash
# ë¡œì»¬ ì‹¤í–‰
./gradlew bootRun

# ë˜ëŠ” Docker ì‹¤í–‰
docker-compose up -d
```

### Step 2: k6 ì„¤ì¹˜ (í•œ ë²ˆë§Œ)

```bash
# macOS
brew install k6

# ë‹¤ë¥¸ OSëŠ” README.md ì°¸ì¡°
```

### Step 3: í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ì¶”ì²œ)
./k6-tests/run-all-tests.sh

# ë˜ëŠ” ê°œë³„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
k6 run k6-tests/scripts/1-upload-test.js
```

---

## ğŸ“Š ë¬´ì—‡ì„ í™•ì¸í•´ì•¼ í•˜ë‚˜ìš”?

í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

### âœ… ì„±ê³µ ê¸°ì¤€

| ë©”íŠ¸ë¦­ | ëª©í‘œ | ì˜ë¯¸ |
|--------|------|------|
| `http_req_duration` p95 | < 500ms | ì‚¬ìš©ì ëŒ€ë¶€ë¶„ì´ 0.5ì´ˆ ì•ˆì— ì‘ë‹µ ë°›ìŒ |
| `http_req_failed` | < 1% | ì—ëŸ¬ê°€ ê±°ì˜ ì—†ìŒ |
| `checks` | > 95% | ëŒ€ë¶€ë¶„ì˜ ìš”ì²­ì´ ì •ìƒ |

### âŒ ë¬¸ì œê°€ ìˆë‹¤ë©´?

**ì¦ìƒ**: ì‘ë‹µ ì‹œê°„ì´ ë„ˆë¬´ ëŠë¦¼ (> 2ì´ˆ)
```bash
ğŸ”´ ë³‘ëª© ë°œê²¬! ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤
```

**í•´ê²°ì±…**: README.mdì˜ "ì„±ëŠ¥ ê°œì„  ê³¼ì •" ì°¸ì¡°

---

## ğŸ¯ ê¶Œì¥ í…ŒìŠ¤íŠ¸ ìˆœì„œ

### 1ë‹¨ê³„: ë² ì´ìŠ¤ë¼ì¸ ì¸¡ì • (í˜„ì¬ ìƒíƒœ)

```bash
./k6-tests/run-all-tests.sh baseline
```

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: ì•½ 10ë¶„

**ê²°ê³¼**:
- `k6-tests/results/baseline-*.json` íŒŒì¼ ìƒì„±
- í˜„ì¬ ì„±ëŠ¥ì˜ ê¸°ì¤€ì  í™•ë³´

---

### 2ë‹¨ê³„: ë¬¸ì œ íŒŒì•…

í…ŒìŠ¤íŠ¸ ì¶œë ¥ì—ì„œ ë‹¤ìŒì„ í™•ì¸:

```
âŒ upload_duration p95: 12000ms  (ëª©í‘œ: < 5000ms)
âŒ api read p95: 800ms           (ëª©í‘œ: < 500ms)
âš ï¸  spatial query p95: 1200ms    (ëª©í‘œ: < 1000ms)
```

---

### 3ë‹¨ê³„: ì„±ëŠ¥ ê°œì„ 

**ê°€ì¥ í° ë³‘ëª©ë¶€í„° í•´ê²°**:

#### ğŸ¥‡ 1ìˆœìœ„: íŒŒì¼ ì—…ë¡œë“œ (12ì´ˆ â†’ 2ì´ˆ)

```java
// MediaService.java - ë¹„ë™ê¸° ì²˜ë¦¬ ì¶”ê°€
@Async
public CompletableFuture<Long> saveMediaAsync(MultipartFile file) {
    // ...
}
```

#### ğŸ¥ˆ 2ìˆœìœ„: API ìºì‹± (800ms â†’ 50ms)

```java
// GuideService.java - ìºì‹œ ì¶”ê°€
@Cacheable(value = "guides", key = "#id")
public GuideResponseDto getGuide(Long id) {
    // ...
}
```

#### ğŸ¥‰ 3ìˆœìœ„: ê³µê°„ ì¿¼ë¦¬ ì¸ë±ìŠ¤

```sql
-- PostgreSQLì—ì„œ ì‹¤í–‰
CREATE INDEX idx_location_coordinate
ON location USING GIST(coordinate);
```

---

### 4ë‹¨ê³„: ê°œì„  íš¨ê³¼ ì¸¡ì •

```bash
./k6-tests/run-all-tests.sh optimized
```

---

### 5ë‹¨ê³„: ê²°ê³¼ ë¹„êµ

```bash
./k6-tests/run-all-tests.sh compare
```

**ì˜ˆìƒ ì¶œë ¥**:
```
âœ… ì„±ëŠ¥ ê°œì„  ê²°ê³¼:
  P95 ì‘ë‹µì‹œê°„:
    Before: 2500ms
    After:  400ms
    ê°œì„ ìœ¨: 84%
```

---

## ğŸ”¥ ë¹ ë¥¸ ë¬¸ì œ í•´ê²°

### Q: "ì„œë²„ì— ì ‘ì†í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ì—ëŸ¬

**A**: ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
```bash
curl http://localhost:8080/actuator/health

# ì‘ë‹µì´ ì—†ë‹¤ë©´
./gradlew bootRun
```

---

### Q: ëª¨ë“  ìš”ì²­ì´ ì‹¤íŒ¨í•©ë‹ˆë‹¤

**A**: í¬íŠ¸ ë²ˆí˜¸ í™•ì¸
```bash
# 8082 í¬íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤ë©´
BASE_URL=http://localhost:8082 ./k6-tests/run-all-tests.sh
```

---

### Q: íŒŒì¼ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ê°€ 400 ì—ëŸ¬

**A**: ì‹¤ì œ ì´ë¯¸ì§€ íŒŒì¼ ì¤€ë¹„
```bash
# k6-tests/data/ ë””ë ‰í† ë¦¬ì— test-image.jpg ì¶”ê°€
cp ~/Downloads/photo.jpg k6-tests/data/test-image.jpg
```

---

## ğŸ“ˆ Grafanaë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘:

1. **Grafana ì—´ê¸°**: http://localhost:3000
2. **ë¡œê·¸ì¸**: admin / admin
3. **ëŒ€ì‹œë³´ë“œ**: Application Metrics ì„ íƒ
4. **í™•ì¸ í•­ëª©**:
   - CPU ì‚¬ìš©ë¥ 
   - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
   - HTTP ìš”ì²­ ì²˜ë¦¬ ì‹œê°„
   - ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì‹œê°„

---

## ğŸ“ í•™ìŠµ íŒ

### ì²˜ìŒì´ë¼ë©´

1. **2-api-read-test.js**ë¶€í„° ì‹œì‘í•˜ì„¸ìš” (ê°€ì¥ ê°„ë‹¨)
   ```bash
   k6 run k6-tests/scripts/2-api-read-test.js
   ```

2. ê²°ê³¼ë¥¼ ë³´ë©´ì„œ ë©”íŠ¸ë¦­ì˜ ì˜ë¯¸ë¥¼ ì´í•´í•˜ì„¸ìš”

3. í•˜ë‚˜ì”© ê°œì„ í•˜ë©° ë³€í™”ë¥¼ ê´€ì°°í•˜ì„¸ìš”

### ê²½í—˜ì´ ìˆë‹¤ë©´

1. **4-mixed-scenario-test.js**ë¡œ ì „ì²´ ì„±ëŠ¥ íŒŒì•…
   ```bash
   k6 run k6-tests/scripts/4-mixed-scenario-test.js
   ```

2. ë³‘ëª©ì„ ì°¾ì•„ ì§‘ì¤‘ ê°œì„ 

3. ëª©í‘œ SLA ë‹¬ì„± ì‹œê¹Œì§€ ë°˜ë³µ

---

## ğŸ’¡ ë‹¤ìŒ ë‹¨ê³„

- [ ] ë² ì´ìŠ¤ë¼ì¸ ì¸¡ì • ì™„ë£Œ
- [ ] 3ê°œ ì´ìƒì˜ ë³‘ëª© ê°œì„ 
- [ ] ìµœì¢… ì„±ëŠ¥ ê²€ì¦
- [ ] í”„ë¡œë•ì…˜ í™˜ê²½ ì ìš©

**Happy Testing! ğŸ‰**
