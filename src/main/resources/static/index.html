<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SnapGuide Test</title>
</head>
<body>
<h1>íšŒì›ê°€ì…</h1>
<input id="email" placeholder="ì´ë©”ì¼" />
<input id="password" placeholder="ë¹„ë°€ë²ˆí˜¸" type="password" />
<button onclick="signup()">íšŒì›ê°€ì…</button>

<h1>ë¡œê·¸ì¸</h1>
<input id="loginEmail" placeholder="ì´ë©”ì¼" />
<input id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸" type="password" />
<button onclick="login()">ë¡œê·¸ì¸</button>

<h1>êµ¬ê¸€ ë¡œê·¸ì¸</h1>
<a href="/oauth2/authorization/google">êµ¬ê¸€ ë¡œê·¸ì¸</a>

<h1>í† í° ì¬ë°œê¸‰</h1>
<button onclick="reissueToken()">í† í° ì¬ë°œê¸‰</button>

<h1>ë¡œê·¸ì•„ì›ƒ</h1>
<button onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>

<h1>ì¸ì¦ í…ŒìŠ¤íŠ¸</h1>
<button onclick="authTest()">ì¸ì¦ëœ ì‚¬ìš©ì í™•ì¸</button>
<div id="authResult"></div>

<h1>ê°€ì´ë“œ ì—…ë¡œë“œ</h1>
<input type="file" id="imageFile" name="file" multiple>
<label for="tip"></label>
<textarea id="tip" placeholder="íŒì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
<button onclick="upload()">ì—…ë¡œë“œ</button>

<h1>ìœ ì € ê°€ì´ë“œ ì‘ì„± ë¦¬ìŠ¤íŠ¸</h1>
<button onclick="loadUserGuides()">ì‚¬ìš©ì ê°€ì´ë“œ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°</button>
<div id="guideWrap"></div>

<h1>ê±°ë¦¬ë³„ ê°€ì´ë“œ ë³´ê¸°</h1>
<!-- ê±°ë¦¬ ì„ íƒ í† ê¸€ -->
<select id="radiusSelect">
    <option value="5">5km</option>
    <option value="10">10km</option>
    <option value="20">20km</option>
    <option value="50">50km</option>
    <option value="100">100km</option>
</select>
<button onclick="fetchGuides()">ê°€ì´ë“œ ì¡°íšŒ</button>
<div id="guideNear"></div>

<h1>ì‚¬ì§„ ëª©ë¡ ë³´ê¸°</h1>
<button onclick="loadPhotos()">ì‚¬ì§„ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°</button>
<div id="photoList"></div>

<h1>ëª¨ë“  ì‚¬ì§„ ë³´ê¸°</h1>
<h3 id="photoCountText">ğŸ“· ì „ì²´ ì‚¬ì§„ ìˆ˜: ì•Œ ìˆ˜ ì—†ìŒ</h3>
<!-- ì‹œì‘ ë° í˜ì´ì§€ ë²„íŠ¼ -->
<div id="allPhotoContainer" style="height: 500px; overflow-y: auto; border: 1px solid gray;">
    <div id="allPhoto"></div>
</div>
<div style="margin-top: 10px;">
    <button id="prevPageBtn" disabled>â¬…ï¸ ì´ì „</button>
    <button id="nextPageBtn" disabled>â¡ï¸ ë‹¤ìŒ</button>
    <button id="loadStartBtn">ğŸ“¸ ì‚¬ì§„ ë¶ˆëŸ¬ì˜¤ê¸° ì‹œì‘</button>
    <span id="loadingText" style="margin-left: 10px; display: none;">âŒ› ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
</div>

<h1>ë©¤ë²„ ë¦¬ìŠ¤íŠ¸ ë³´ê¸°</h1>
<button onclick="loadMembers()">ë©¤ë²„ ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°</button>
<ul id="memberList"></ul>

<script>
    let token = localStorage.getItem("accessToken") || null;

    // ëª¨ë“  ì‚¬ì§„ ë¶ˆëŸ¬ì˜¤ê¸° í•  ë•Œ í•„ìš”í•œ ë³€ìˆ˜ ì¶”ê°€
    let page = 0;
    const size = 10;
    let totalCount = 0;

    let loading = false;
    let done = false; // ë” ì´ìƒ ë¶ˆëŸ¬ì˜¬ ì´ë¯¸ì§€ê°€ ì—†ìŒì„ í‘œì‹œ

    function signup() {
        fetch("http://localhost:8080/api/auth/signup", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                email: document.getElementById("email").value,
                password: document.getElementById("password").value
            })
        })
            .then(res => {
                if (!res.ok) throw new Error(`HTTP Error: ${res.status}`);
                alert("íšŒì›ê°€ì… ì„±ê³µ! ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”.");
                return res.json();
            })
            .catch(err => alert(err.message));
    }

    function login() {
        const email = document.getElementById("loginEmail").value;
        const password = document.getElementById("loginPassword").value;
        fetch("http://localhost:8080/api/auth/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email, password })
        })
            .then(res => {
                if (!res.ok) throw new Error("ë¡œê·¸ì¸ ì‹¤íŒ¨");
                return res.json();
            })
            .then(data => {
                localStorage.setItem("accessToken", data.accessToken);
                localStorage.setItem("refreshToken", data.refreshToken);
                token = data.accessToken;
                alert("ë¡œê·¸ì¸ ì„±ê³µ");
            })
            .catch(err => alert(err.message));
    }

    // í† í° ì¬ë°œê¸‰ ìš”ì²­
    function reissueToken() {
        const accessToken = localStorage.getItem("accessToken");
        const refreshToken = localStorage.getItem("refreshToken");

        if (!accessToken || !refreshToken) {
            return alert("í† í°ì´ ì—†ìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”.");
        }

        fetch("http://localhost:8080/api/auth/reissue", {
            method: "POST",
            headers: { "Content-Type": "application/json",
                        "Authorization": "Bearer " + accessToken
            },
            body: JSON.stringify({
                accessToken: accessToken,
                refreshToken: refreshToken
            })
        })
            .then(res => {
                if (!res.ok) throw new Error("í† í° ì¬ë°œê¸‰ ì‹¤íŒ¨");
                return res.json();
            })
            .then(data => {
                localStorage.setItem("accessToken", data.accessToken);
                token = data.accessToken;
                if(data.refreshToken) { // refreshTokenë„ ì¬ë°œê¸‰ ë˜ë©´ ì €ì¥
                    localStorage.setItem("refreshToken", data.refreshToken);
                }
                alert("í† í°ì´ ì¬ë°œê¸‰ ë˜ì—ˆìŠµë‹ˆë‹¤.");
            })
            .catch(err => alert(err.message));
    }

    // ë¡œê·¸ì•„ì›ƒ ìš”ì²­
    function logout() {
        const accessToken = localStorage.getItem("accessToken");
        const refreshToken = localStorage.getItem("refreshToken");

        if (!accessToken) {
            return alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        }

        fetch("http://localhost:8080/api/auth/logout", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer " + accessToken
            },
            body: JSON.stringify({
                accessToken: accessToken,
                refreshToken: refreshToken
            })
        })
            .then(res => {
                if (!res.ok) throw new Error("ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨");
                // ë¡œê·¸ì•„ì›ƒ ì„±ê³µ ì‹œ ë¡œì»¬ í† í° ì œê±°
                localStorage.removeItem("accessToken");
                localStorage.removeItem("refreshToken");
                alert("ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.");
            })
            .catch(err => alert(err.message));
    }

    function authTest() {
        const token = localStorage.getItem("accessToken");
        if (!token) {
            alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return;
        }

        fetch("http://localhost:8080/api/auth/test", {
            method: "GET",
            headers: {
                "Authorization": "Bearer " + token
            }
        })
            .then(res => {
                if (!res.ok) throw new Error("ì¸ì¦ ì‹¤íŒ¨");
                return res.text(); // ë¬¸ìì—´ ë°˜í™˜
            })
            .then(data => {
                document.getElementById("authResult").innerText = data;
            })
            .catch(err => alert(err.message));
    }

    function upload() {
        if (!token) return alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");

        const files = document.getElementById("imageFile").files;
        const tip = document.getElementById("tip").value;
        const formData = new FormData();

        for (const file of files) {
            formData.append("files", file); // â† ì´ë¦„ì€ ë°˜ë“œì‹œ ì„œë²„ì—ì„œ ì§€ì •í•œ "files"ì™€ ê°™ì•„ì•¼ í•¨
        }
        formData.append("tip", tip);

        fetch("http://localhost:8080/guide/api/upload", {
            method: "POST",
            headers: {
                "Authorization": "Bearer " + token
            },
            body: formData
        })
            .then(res => {
                if (!res.ok) throw new Error("ì—…ë¡œë“œ ì‹¤íŒ¨");
                return res.json();
            })
            .then(data => {
                alert("ì—…ë¡œë“œ ì„±ê³µ");
            })
            .catch(err => alert(err.message));
    }



    function loadUserGuides() {
        if (!token) return alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");

        fetch("http://localhost:8080/guide/api/my", {
            headers: { "Authorization": "Bearer " + token }
        })
            .then(r => r.json())
            .then(list => {
                const wrap = document.getElementById("guideWrap");
                wrap.innerHTML = "";
                list.forEach(g => {
                    const card = document.createElement("div");
                    card.className = "guide-card";

                    /* ì¸ìŠ¤íƒ€ ë°©ì‹: ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë¥¼ ì¸ë„¤ì¼, ë‚˜ë¨¸ì§€ëŠ” ìˆ¨ê²¨ë‘ê³  í´ë¦­ ì‹œ ìŠ¬ë¼ì´ë“œ */
                    const imgBox = document.createElement("div");
                    imgBox.className = "img-box";
                    g.media.slice(0,10).forEach((m,i)=>{
                        const img = document.createElement("img");
                        img.src = "http://localhost:8080"+m.url;
                        if(i!==0){ img.style.display="none"; }
                        imgBox.appendChild(img);
                    });
                    // í´ë¦­ ì‹œ ë‹¤ìŒ ì‚¬ì§„
                    imgBox.onclick = () => {
                        const imgs = imgBox.querySelectorAll("img");
                        let idx = [...imgs].findIndex(el=>el.style.display!=="none");
                        imgs[idx].style.display="none";
                        imgs[(idx+1)%imgs.length].style.display="block";
                    };

                    const tip = document.createElement("p");
                    tip.textContent = g.tip;

                    // const loc = document.createElement("span");
                    // loc.textContent = g.locationName;

                    const updateBtn = document.createElement("button");
                    updateBtn.textContent = "âœï¸ ìˆ˜ì •";
                    updateBtn.onclick = () => {
                        const newTip = prompt("ìƒˆ íŒ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”:", g.tip);
                        if (newTip) updateGuide(g.id, newTip);
                    };

                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "ğŸ—‘ ì‚­ì œ";
                    deleteBtn.onclick = () => {
                        if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) deleteGuide(g.id);
                    };

                    const btnGroup = document.createElement("div");
                    btnGroup.className = "button-group";
                    btnGroup.append(updateBtn, deleteBtn);

                    card.append(imgBox, tip, updateBtn, btnGroup);
                    wrap.appendChild(card);
                });
            });
    }

    function fetchGuides(){
        if (!token) return alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");

        // í˜„ì¬ ìœ„ì¹˜ (ì˜ˆì‹œ)
        // const currentLat = 35.202186;
        // const currentLng = 128.709007;
        const currentLat = 37.51;
        const currentLng = 127.01;

        const radius = document.getElementById('radiusSelect').value;
        fetch(`/guide/api/nearby?lat=${currentLat}&lng=${currentLng}&radius=${radius}`, {
            headers: { "Authorization": "Bearer " + token }
        })
        .then(res => res.json())
        .then(list => {
            console.log("ğŸ“¦ ë°›ì•„ì˜¨ ê°€ì´ë“œ ë¦¬ìŠ¤íŠ¸:", list);  // â† ì—¬ê¸°ì— ë¡œê·¸ ì¶”ê°€!
            const wrap = document.getElementById("guideNear");
            wrap.innerHTML = "";
            list.forEach(g => {
                const card = document.createElement("div");
                card.className = "guide-card";

                const imgBox = document.createElement("div");
                imgBox.className = "img-box";

                g.media.slice(0, 10).forEach((m, i) => {
                    const img = document.createElement("img");
                    img.src = "http://localhost:8080" + m.url;
                    if (i !== 0) img.style.display = "none";
                    imgBox.appendChild(img);
                });

                imgBox.onclick = () => {
                    const imgs = imgBox.querySelectorAll("img");
                    let idx = [...imgs].findIndex(el => el.style.display !== "none");
                    imgs[idx].style.display = "none";
                    imgs[(idx + 1) % imgs.length].style.display = "block";
                };

                const tip = document.createElement("p");
                tip.textContent = g.tip;

                // const loc = document.createElement("span");
                // loc.textContent = g.locationName + ` (${g.distance.toFixed(1)}m)`; // ê±°ë¦¬ í‘œì‹œ

                const updateBtn = document.createElement("button");
                updateBtn.textContent = "âœï¸ ìˆ˜ì •";
                updateBtn.onclick = () => {
                    const newTip = prompt("ìƒˆ íŒ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”:", g.tip);
                    if (newTip) updateGuide(g.id, newTip);
                };

                const deleteBtn = document.createElement("button");
                deleteBtn.textContent = "ğŸ—‘ ì‚­ì œ";
                deleteBtn.onclick = () => {
                    if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) deleteGuide(g.id);
                };


                const btnGroup = document.createElement("div");
                btnGroup.className = "button-group";
                btnGroup.append(updateBtn, deleteBtn);

                // card.append(imgBox, tip, loc);
                card.append(imgBox, tip, updateBtn, btnGroup);
                wrap.appendChild(card);
            });
        })
            .catch(err => {
                console.error("ê°€ì´ë“œ ë¡œë”© ì‹¤íŒ¨:", err);
                alert("ê°€ì´ë“œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            });
    }

    function loadPhotos() {
        if (!token) return alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        fetch("http://localhost:8080/media/list", {
            method: "GET",
            headers: {
                "Authorization": "Bearer " + token
            }
        })
            .then(res => {
                if (!res.ok) throw new Error("ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨");
                return res.json();
            })
            .then(data => {
                const container = document.getElementById("photoList");
                container.innerHTML = "";
                data.forEach(media => {
                    console.log("media ê°ì²´:", media);
                    const img = document.createElement("img");
                    img.src = "http://localhost:8080" + media.url;
                    console.log("ìš”ì²­ URL : ", img.src)
                    img.style.width = "200px";
                    img.style.margin = "10px";
                    container.appendChild(img);

                    // const tip = document.createElement("p");
                    // tip.innerText = media.tip || "";
                    // container.appendChild(tip);
                });
            })
            .catch(err => alert(err.message));
    }


    const photoContainer = document.getElementById("allPhoto");
    const startBtn = document.getElementById("loadStartBtn");
    const nextBtn = document.getElementById("nextPageBtn");
    const prevBtn = document.getElementById("prevPageBtn");
    const loadingText = document.getElementById("loadingText");
    const countText = document.getElementById("photoCountText");

    // ğŸ“Œ ì „ì²´ ì‚¬ì§„ ìˆ˜ ë¯¸ë¦¬ ê°€ì ¸ì˜¤ê¸°
    function fetchPhotoCount() {
        fetch("http://localhost:8080/media/allphoto/count", {
            headers: {
                "Authorization": "Bearer " + token
            }
        })
            .then(res => res.json())
            .then(count => {
                totalCount = count;
                countText.innerText = `ğŸ“· ì „ì²´ ì‚¬ì§„ ìˆ˜: ${totalCount}ê°œ`;
            })
            .catch(err => {
                console.warn("ì´ ê°œìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨", err);
            });
    }

    function allPhotos() {
        if (loading) return;
        loading = true;
        loadingText.style.display = "inline";

        fetch(`http://localhost:8080/media/allphoto?page=${page}&size=${size}`, {
            headers: {
                "Authorization": "Bearer " + token
            }
        })
            .then(res => {
                if (!res.ok) throw new Error("ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨");
                return res.json();
            })
            .then(data => {
                if (page === 0) {
                    prevBtn.disabled = true;
                } else {
                    prevBtn.disabled = false;
                }

                if ((page + 1) * size >= totalCount) {
                    done = true;
                    nextBtn.disabled = true;
                    nextBtn.innerText = "âœ… ë§ˆì§€ë§‰ í˜ì´ì§€";
                } else {
                    done = false;
                    nextBtn.disabled = false;
                    nextBtn.innerText = "â¡ï¸ ë‹¤ìŒ";
                }

                photoContainer.innerHTML = ""; // ê¸°ì¡´ ì‚¬ì§„ ì§€ìš°ê¸°
                data.forEach(media => {
                    const fileName = media.fileName.toLowerCase();
                    const fileUrl = "http://localhost:8080" + media.url;

                    if (fileName.endsWith(".heic")) {
                        // HEIC íŒŒì¼ì´ë©´ ì´ë¯¸ì§€ ëŒ€ì‹  ë‹¤ìš´ë¡œë“œ ë§í¬ í‘œì‹œ
                        const link = document.createElement("a");
                        link.href = fileUrl;
                        link.innerText = `${media.fileName} (HEIC íŒŒì¼ - ë‹¤ìš´ë¡œë“œ)`;
                        link.download = media.fileName;
                        link.style.display = "block";
                        link.style.margin = "10px";
                        photoContainer.appendChild(link);
                    } else {
                        // ì¼ë°˜ ì´ë¯¸ì§€ íŒŒì¼ì´ë©´ <img>ë¡œ í‘œì‹œ
                        const img = document.createElement("img");
                        img.src = fileUrl;
                        img.loading = "lazy";
                        img.style.width = "200px";
                        img.style.margin = "10px";
                        photoContainer.appendChild(img);
                    }
                });

                loading = false;
                loadingText.style.display = "none";
            })
            .catch(err => {
                alert(err.message);
                loading = false;
                loadingText.style.display = "none";
            });
    }

    function updateGuide(id, newTip) {
        fetch(`/guide/api/update`, {
            method: "PUT",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer " + token
            },
            body: JSON.stringify({ id : id, tip : newTip })
        }).then(() => {
            alert("ìˆ˜ì • ì™„ë£Œ");
            loadUserGuides();
        }).catch(err => {
            alert("ìˆ˜ì • ì‹¤íŒ¨");
            console.error(err);
        });
    }

    function deleteGuide(id) {
        fetch(`/guide/api/delete/${id}`, {
            method: "DELETE",
            headers: { "Authorization": "Bearer " + token }
        }).then(() => {
            alert("ì‚­ì œ ì™„ë£Œ");
            loadUserGuides();
        }).catch(err => {
            alert("ì‚­ì œ ì‹¤íŒ¨");
            console.error(err);
        });
    }

    // ğŸ“Œ ì‹œì‘ ë²„íŠ¼
    startBtn.addEventListener("click", () => {
        page = 0;
        done = false;
        photoContainer.innerHTML = "";
        nextBtn.style.display = "inline-block";
        prevBtn.style.display = "inline-block";
        nextBtn.disabled = false;
        fetchPhotoCount();
        allPhotos();
    });

    // ğŸ“Œ ë‹¤ìŒ í˜ì´ì§€
    nextBtn.addEventListener("click", () => {
        if (!done) {
            page++;
            allPhotos();
        }
    });

    // ğŸ“Œ ì´ì „ í˜ì´ì§€
    prevBtn.addEventListener("click", () => {
        if (page > 0) {
            page--;
            allPhotos();
        }
    });

    function loadMembers() {
        if (!token) {
            alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return;
        }

        fetch("http://localhost:8080/api/members", {
            headers: {
                "Authorization": "Bearer " + token
            }
        })
            .then(res => {
                if (!res.ok) throw new Error("ë©¤ë²„ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨");
                return res.json();
            })
            .then(data => {
                const list = document.getElementById("memberList");
                list.innerHTML = "";
                data.forEach(member => {
                    const li = document.createElement("li");
                    li.textContent = `${member.id}: ${member.email}`;
                    list.appendChild(li);
                });
            })
            .catch(err => alert(err.message));
    }
// google ë¡œê·¸ì¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ ìš©
    function getTokenFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        const accessToken = urlParams.get("accessToken");
        const refreshToken = urlParams.get("refreshToken");

        if (accessToken && refreshToken) {
            localStorage.setItem("accessToken", accessToken);
            localStorage.setItem("refreshToken", refreshToken);
            alert("êµ¬ê¸€ ë¡œê·¸ì¸ ì„±ê³µ!");
            // URL ê¹”ë”í•˜ê²Œ ì •ë¦¬ (í† í° ì¿¼ë¦¬ ì œê±°)
            window.history.replaceState({}, document.title, window.location.pathname);
        }
    }
    // ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ë¬¸ì„œ ì „ì²´(HTML, CSS, ì´ë¯¸ì§€ ë“± ëª¨ë“  ë¦¬ì†ŒìŠ¤) ê°€ ë¡œë“œëœ í›„ ì‹¤í–‰ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    // window.onloadëŠ” ë¸Œë¼ìš°ì €ê°€ HTML í˜ì´ì§€ì˜ ëª¨ë“  ìš”ì†Œë¥¼ ë‹¤ ë¶ˆëŸ¬ì˜¨ ë‹¤ìŒ ì‹¤í–‰í•  JavaScript ì½”ë“œë¥¼ ì •ì˜í•˜ëŠ” ë°©ì‹
    // ì‘ë™ ë°©ì‹
    // 1.	HTML í˜ì´ì§€ê°€ íŒŒì‹±ë˜ê³ ,
    // 2.	ì™¸ë¶€ CSS, ì´ë¯¸ì§€, iframe ë“± ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ë‹¤ ë¡œë“œëœ ë’¤,
    // 3.	window.onloadì— ë“±ë¡ëœ í•¨ìˆ˜ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.
    window.onload = function() {
        getTokenFromURL();
        token = localStorage.getItem("accessToken");

        if (token) {
            console.log("JWT í† í° ê°ì§€ë¨");
        } else {
            console.log("í† í° ì—†ìŒ");
        }
    };
</script>
</body>
</html>

<style>
    .guide-card{border:1px solid #ddd;margin:10px;padding:10px;width:240px}
    .img-box{width:100%;height:240px;overflow:hidden;position:relative;cursor:pointer}
    .img-box img{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0}
</style>

